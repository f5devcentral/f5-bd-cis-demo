# Multi-cluster one tier demo

## Overvire of the CIS config

This is a multi-cluster demo which expectects a single kube config file with the contexts of all the clusters to be used.

This demo has been used with two clusters with context names ocp1 and ocp2. The files in the cis-config folder will need 
to be modified if these are different (probably it is easier to just create a replica of the context with these names).

The demo makes use of  bin/run-cluster.sh which is expected to be in the $PATH. Once copied somewhere in the $PATH, run run-cluster.sh 
without arguments and follow the instructions.

In a multi-cluster setup, there are two CIS instances (to provide HA) for each BIG-IP hence there are 4 Deployment files for the typical 2xBIG-IP cluster. The files in f5-bigip<id>-ctlr-deployment.clusterip.<cluster>.yaml need to be accomodated specifying IP addresses. The passwords are stored in a secret created from the cis-config/deploy-cis.sh script.

Also, in a multi-cluster setup CIS makes use of kubeconfig files stored as screts that are used to access the CISÂ´ clusters APIs. These are automatically generated by the cis-config/deploy-cis.sh script.

To deploy and undeploy CIS just run the deploy-cis.sh and undeploy-cis.sh without arguments from the base folder.

## Overview of CIS config


